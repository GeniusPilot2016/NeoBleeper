# Руководство по устранению неполадок NeoBleeper

В этом руководстве представлены решения распространённых проблем, возникающих при использовании NeoBleeper, особенно связанных с поведением системного динамика, выводом звука, совместимостью оборудования и постоянными звуковыми сигналами.

---

## 1. Застревание звука в системном динамике после сбоя или принудительного закрытия

**Проблема:**
Если NeoBleeper аварийно завершает работу или принудительно закрывается во время воспроизведения звука через системный динамик (ПК), звук может «застревать», что приводит к непрерывному звуковому сигналу или жужжанию.

**Почему это происходит:**
Системный динамик управляется на низком аппаратном/программном уровне. Если приложение не отключает или не сбрасывает динамик при выходе, звуковой сигнал может сохраняться.

**Решения:**
- **Воспользуйтесь утилитой NeoBleeper Остановка бипера (для 64-битной версии):**
  NeoBleeper поставляется с утилитой «NeoBleeper Остановка бипера» в папке программы.
  
  ![image4](https://github.com/user-attachments/assets/4a0f13d2-a124-48aa-aac5-4d762371a10a)
  
  - Запустите этот инструмент и нажмите кнопку **Остановить звуковой сигнал**, чтобы остановить постоянный звуковой сигнал системного динамика.
  - Используйте эту утилиту только в том случае, если звуковой сигнал продолжает воспроизводиться после сбоя или принудительного выхода.

#### Сообщения Остановка бипера и их значение

  При использовании утилиты Остановка бипера вы можете увидеть следующие сообщения:

  ![image1](https://github.com/user-attachments/assets/570003f4-754f-47a3-b448-43e1cf9d0d1a)
    
  **Системный динамик не издаёт звуковой сигнал или издаёт звуковой сигнал другим способом. Действие не выполнено.**  
  Это сообщение появляется, когда утилита проверяет системный динамик и определяет, что он либо не издаёт звуковой сигнал, либо издаёт его неконтролируемым образом. В этом случае Остановка бипера не будет предпринимать никаких дальнейших действий.
  - *Совет:* Если вы всё ещё слышите постоянный звуковой сигнал, попробуйте перезагрузить компьютер.

  ![image2](https://github.com/user-attachments/assets/b9ca5073-e741-48d5-937c-fb674bf479c7)
    
  **Звуковой сигнал успешно остановлен!**  
  Это сообщение подтверждает, что утилита Остановка бипера обнаружила застрявший звуковой сигнал и успешно его остановила. Дальнейшие действия не требуются.

  ![image3](https://github.com/user-attachments/assets/54474339-d95f-4fbb-a2a8-c2abf3bd21b1)
  
  **Выход системного динамика отсутствует или присутствует нестандартный выход системного динамика. Отключение звукового сигнала может привести к нестабильной работе или нежелательному поведению. Хотите продолжить?**  
  Это сообщение появляется при запуске утилиты Остановка бипера и обнаружении в вашей системе либо отсутствия стандартного системного динамика (ПК), либо нестандартного выхода системного динамика. В этом случае утилита предупреждает, что попытка использования Остановка бипера может работать некорректно и потенциально привести к непредвиденному поведению или нестабильной работе.
  Если вы продолжите, утилита попытается отключить звуковой сигнал, но это может быть неэффективно или иметь побочные эффекты, если ваше оборудование не поддерживается или нестандартно.
  Если вы решите не продолжать, утилита завершит работу без внесения каких-либо изменений.
  - *Совет:* Если вы получили это сообщение, это означает, что на вашем компьютере нет совместимого системного динамика, или его выход невозможно контролировать. Любой звуковой сигнал или жужжание, которые вы слышите, вероятно, исходят от другого аудиоустройства (например, основных динамиков или наушников). Используйте стандартные настройки звукового устройства для устранения проблем со звуком и закройте все приложения, которые могут воспроизводить нежелательный звук. Если проблема не устранена, попробуйте перезагрузить компьютер или проверить настройки звука вашего устройства.
    
- **Перезагрузите компьютер:**
  Если Остановка бипера не решит проблему, перезапуск системы сбросит аппаратные настройки динамика.

- **Профилактика:**
  Всегда закрывайте NeoBleeper обычным способом. Избегайте принудительного закрытия через диспетчер задач или аналогичные инструменты во время воспроизведения звука.

---

## 2. Обнаружение и совместимость системных динамиков

NeoBleeper включает в себя логику обнаружения для проверки наличия в вашей системе стандартного выхода для подключения ПК, а также поддержку «скрытых» выходов для подключения системных динамиков (например, не использующих идентификатор PNP0800). Если ваше оборудование не поддерживает стандартный или скрытый системный динамик, или выход нестандартный и не может быть использован, вы можете увидеть предупреждающие сообщения или вам придётся полагаться на стандартное звуковое устройство для подачи звуковых сигналов. Однако, начиная с последних версий, NeoBleeper больше не заставляет вас использовать исключительно звуковое устройство при отсутствии стандартного динамика — теперь он позволяет использовать скрытые/не PNP0800 выходы для подключения системных динамиков, если они есть.

### Пример предупреждения (Изображение 1):

![image1](https://github.com/user-attachments/assets/b8f5aa09-bda5-4894-8da8-f4a36ea4f282)

> **Объяснение:**
> На материнской плате вашего компьютера либо нет стандартного выхода для системных динамиков, либо выход нестандартный. NeoBleeper попытается обнаружить и предложить использовать «скрытые» выходы для системных динамиков, не идентифицированные как PNP0800. Если такой выход доступен, вы можете использовать системный динамик, даже если появится это предупреждение. В противном случае NeoBleeper будет использовать ваше обычное звуковое устройство (например, динамики или наушники).

### Диалоги настроек (изображения 2 и 3):

![image2](https://github.com/user-attachments/assets/80feabb1-1058-4c67-92d0-18d5a2046d8f)

![image3](https://github.com/user-attachments/assets/9d9330e5-4694-4bc8-8a85-c10bf1991a00)

- **Кнопка «Проверить доступность системного динамика»:**

Эта опция включается, если NeoBleeper обнаруживает любой доступный выход системного динамика, включая скрытые или не-PNP0800 выходы.

- **Параметр «Использовать звуковое устройство для создания звукового сигнала»:**

Теперь вы можете отключить эту функцию при обнаружении скрытого или нестандартного выхода системного динамика.

#### Что означает «нестандартный выход системного динамика»?
Некоторые современные компьютеры, ноутбуки или виртуальные машины не оснащены полноценным динамиком ПК, или маршрутизация сигнала нестандартна. NeoBleeper теперь пытается обнаружить и использовать такие скрытые выходы системного динамика (не идентифицированные как устройства PNP0800), но может включить функцию системного динамика только при наличии к ней доступа на аппаратном уровне. Если подходящий выход не найден, вам потребуется использовать обычное звуковое устройство.

## 2.1 Тест выхода системного динамика (обнаружение ультразвуковой частоты)
  NeoBleeper теперь включает новый расширенный аппаратный тест для обнаружения выхода системного динамика (также известного как динамик ПК), даже если устройство не распознаётся Windows (в некоторых идентификаторах, например, PNP0C02 вместо PNP0800). Этот тест использует ультразвуковые частоты (обычно 30–38 кГц, которые не слышны на слух) и анализирует электрическую обратную связь на порту системного динамика.
  
  - **Как это работает:**
  При запуске NeoBleeper выполняет второй этап после обычной проверки идентификатора устройства. Он отправляет ультразвуковые сигналы на порт системного динамика и отслеживает аппаратную обратную связь, чтобы обнаружить наличие работающего выхода динамика, даже если он скрыт или нестандартен.
  
  - **Что вы можете заметить:**
  В некоторых системах, особенно с пьезоэлектрическими излучателями, на этом этапе могут быть слышны слабые щелчки. Это нормально и указывает на то, что аппаратный тест запущен.
  
  ![изображение4](https://github.com/user-attachments/assets/35136b88-1315-4ad3-98f3-e265173ec5d2) 
  
  *Проверка настоящего выходного сигнала системного динамика (динамика ПК) на шаге 2/2... (может быть слышны ученые)*
  
  - **Зачем этот тест?** 
    Во многих современных системах отсутствует системный динамик PNP0800, но при этом имеется пригодный для использования (скрытый) выход на динамик. NeoBleeper использует этот продвинутый метод для включения функций звукового сигнала на большем количестве оборудования.

---

## 3. Поддержка и ограничения ARM64

**Устройства на базе ARM64:**
В системах Windows ARM64 тест «Системный динамик» и флажок «Использовать звуковое устройство для создания звуковых сигналов» **недоступны** в NeoBleeper. Вместо этого все звуковые сигналы и аудиовыходы всегда воспроизводятся через стандартное аудиоустройство (динамики или наушники).

- Кнопка «Тест системного динамика» и связанные с ней функции обнаружения **не** отображаются в настройках на устройствах ARM64.
- Параметр «Использовать звуковое устройство для создания звукового сигнала» отсутствует, поскольку этот режим применяется автоматически.
- Это ограничение существует из-за отсутствия прямого доступа к аппаратным динамикам ПК/системы на платформах Windows ARM64.
- На ARM64 вы всегда будете слышать звуковые сигналы через обычное аудиовыходное устройство.

**Если вы используете компьютер ARM64 и не видите параметры системного динамика в NeoBleeper, это ожидаемо и не является ошибкой.**

---
## 4. Как проверить наличие системного динамика

- **Настольные компьютеры:** У большинства старых настольных компьютеров на материнской плате есть разъём для подключения системного динамика. В новых системах эта функция может отсутствовать или вывод звука может быть скрытым/не PNP0800, который теперь может использовать NeoBleeper.
- **Ноутбуки:** У большинства ноутбуков нет отдельного системного динамика; весь звук направляется через основную аудиосистему.
- **Виртуальные машины:** Эмуляция системного динамика часто отсутствует или работает ненадёжно; выходы, не соответствующие PNP0800, могут быть недоступны.
- **Как проверить:** Если вы видите предупреждения выше, но можете включить и проверить системный динамик в NeoBleeper, вероятно, у вашего компьютера есть скрытый или нестандартный выход.
  
---

## 5. Я не слышу ни звука!

- **Проверьте настройки NeoBleeper:** 
  Если динамик вашей системы недоступен, убедитесь, что ваше звуковое устройство (динамики/наушники) правильно выбрано и работает.
- **Проверьте микшер громкости Windows:**
  Убедитесь, что звук NeoBleeper не отключен в системном микшере громкости.
- **Попробуйте кнопку «Проверить системный динамик»:**
  Используйте её для проверки динамика компьютера.
- **Прочитайте предупреждения:**
  NeoBleeper предоставит подробные инструкции, если не сможет получить доступ к системному динамику.

---

## 6. Предупреждения, ошибки ИИ и устранение неполадок API Google Gemini™

Функция «Создание музыки с помощью ИИ» NeoBleeper использует API Google Gemini™. Вы можете столкнуться с особыми диалоговыми окнами с ошибками или предупреждениями, связанными с доступностью API, ограничениями использования или ограничениями по странам.

### 6.1 Ошибки квоты или ограничения скорости (429 RESOURCE_EXHAUSTED)

![image1](https://github.com/user-attachments/assets/fefd0e09-9763-4d89-b45c-5c55a2cc45ef)

**Пример сообщения:**
```
Произошла ошибка: RESOURCE_EXHAUSTED (Code: 429): You exceeded your current quota, please check your plan and billing details...
```

**Возможные причины:**
- **Квота API для вашего аккаунта исчерпана.** Если вы используете бесплатный ключ API, некоторые модели (например, `gemini-2.0-pro-exp`) могут быть недоступны или иметь очень низкие/жёсткие ограничения на использование для бесплатных аккаунтов. - **Ограничения бесплатного тарифа:** Некоторые новые генеративные модели (например, Gemini Pro Exp) *недоступны* пользователям бесплатного тарифа. Попытка их использования приводит к ошибке квоты или доступности.
- **Превышение ограничений по скорости:** Если вы отправляете слишком много запросов слишком быстро, вы можете достичь ограничений API по скорости даже на платном тарифе.

**Как исправить:**
- **Проверьте квоту API и выставление счетов:** Войдите в свою учетную запись Google Cloud/Gemini, чтобы проверить использование и при необходимости обновить тариф.
- **Используйте только поддерживаемые модели:** Пользователи бесплатного тарифа могут быть ограничены определенными моделями. Проверьте документацию о доступных моделях или переключитесь на поддерживаемую.
- **Подождите и повторите попытку позже:** Иногда, немного подождав, можно временно обновить квоту, о чем свидетельствует обратный отсчет в сообщении. - **Ознакомьтесь с [документацией API Gemini](https://ai.google.dev/gemini-api/docs/rate-limits) для получения актуальной информации о политике использования и ограничениях скорости.**

---

### 6.2 Ограничения по региону или стране

#### "API недоступен в вашей стране"

![image4](https://github.com/user-attachments/assets/7a0d531b-d260-4310-9967-c83b4753cefc)

В некоторых регионах API Google Gemini™ не поддерживается из-за региональных или юридических ограничений.

**Возможные причины:**
- В вашей стране доступность API Gemini ограничена.
- Используемый вами ключ API зарегистрирован в регионе, к которому нет доступа.

**Как исправить:**
- **Проверьте список стран, поддерживаемых API Google Gemini™** в официальной документации.
- Если вы находитесь в стране с ограниченным доступом, функции ИИ будут недоступны.

#### Предупреждение для региона (Панель настроек)

![image3](https://github.com/user-attachments/assets/3746c8be-5519-4829-b9b3-5953e1e7ec12)

В Европейской экономической зоне, Швейцарии или Великобритании для API Gemini™ может потребоваться платная (не бесплатная) учётная запись Google.

- Если вы видите это предупреждение, убедитесь, что вы повысили тарифный план API Gemini, прежде чем пытаться использовать функции ИИ.

---

### 6.3 Общие рекомендации по API ИИ

- Вводите только свой собственный ключ API; не передавайте его третьим лицам в целях безопасности.
- NeoBleeper передаёт ваш ключ API только непосредственно сервису Gemini, если это необходимо для использования функций.
- Если ошибки повторяются, попробуйте удалить и повторно добавить ключ API, а также дважды проверьте, активен ли он.

---

## 7. Советы по системному динамику и звуку для определённых чипсетов (включая Intel B660)

### Если звука нет, звук искажён или системный динамик работает нестабильно:

Некоторые современные чипсеты, включая Intel B660 и более новые, могут иметь проблемы с инициализацией или повторной инициализацией системного динамика (пикшера), что приводит к тишине или проблемам со звуком.

**Советы для пользователей, столкнувшихся с этой проблемой:**

- **Попробуйте перевести компьютер в спящий режим и снова вывести его из спящего режима.**
Это может помочь повторно инициализировать или сбросить настройки низкоуровневого аппаратного порта, отвечающего за системный динамик, и восстановить работу звукового сигнала.
- **Используйте функцию «Использовать звуковое устройство для создания звукового сигнала»** в качестве запасного варианта, если выход системного динамика нестабилен.
- **Проверьте наличие обновлений BIOS или прошивки:** Некоторые производители материнских плат могут выпускать обновления, улучшающие совместимость с портом динамика.
- **Только для настольных компьютеров:** Если вы добавили, удалили или повторно подключили динамики системы, выполните полное выключение и включение питания.

_Этот способ решения проблемы подсвечен в настройках:_

![image2](https://github.com/user-attachments/assets/2710e08a-60a2-43dc-9f3d-273a16b4f211)

> *Если звука нет или он искажен, попробуйте перевести компьютер в спящий режим и вывести его из него. Это может помочь повторно инициализировать системный динамик на затронутых чипсетах.*

---

*Если у вас возникли проблемы со звуком или ИИ, не описанные здесь, приложите скриншоты ошибок, сведения об аппаратном обеспечении вашего ПК (особенно о производителе и модели материнской платы/чипсета), а также страну/регион при запросе поддержки или создании вопроса на GitHub.*

---

## 6. Часто задаваемые вопросы

### В: Можно ли использовать системный динамик, если на моём оборудовании нет устройства PNP0800?
**A:** Да! NeoBleeper теперь пытается обнаружить и использовать скрытые или не-PNP0800 выходы системных динамиков, где это возможно. В случае успеха вы сможете использовать системный динамик, даже если Windows не обнаруживает стандартное устройство.

### В: Почему настройка «Использовать звуковое устройство для создания звукового сигнала» иногда становится постоянной (в старых версиях)?
**A:** Если стандартный выход системного динамика не обнаружен (в старых версиях), NeoBleeper принудительно применяет эту настройку, чтобы обеспечить вывод звука.

### В: Есть ли решение проблемы отсутствия системного динамика?
**A:** Если стандартный выход системного динамика не обнаружен (в старых версиях), необходимо использовать обычное звуковое устройство (динамики/наушники).

### В: Что делать, если утилита Остановка бипера не останавливает застрявший звуковой сигнал?
**A:** Перезагрузите компьютер, чтобы сбросить настройки динамика, если утилита Остановка бипера не работает.

### В: Почему я слышу щелчки во время запуска?
**A:** Во время расширенного теста выходных сигналов динамиков системы (шаг 2) NeoBleeper посылает ультразвуковые сигналы на оборудование для обнаружения скрытых или нестандартных выходов динамиков. В некоторых системах (особенно с пьезоизлучателями) это может вызывать слабые щелчки. Это нормально и не является признаком неисправности; это просто означает, что выполняется тест оборудования.

### В: Может ли ультразвуковой тест оборудования (шаг 2) обнаружить неисправные (разомкнутая цепь) или отсоединенные динамики системы?
**A:** В настоящее время это не проверено и неизвестно. Хотя тест проверяет наличие электрической обратной связи и активность портов, он может ненадёжно различать физически присутствующий, но неисправный (разомкнутая цепь) или отсоединенный динамик и отсутствующий динамик. Если динамик полностью сломан или отключён (разомкнутая цепь), тест может вернуть результат «ложь», что означает отсутствие функционального выхода. Однако это поведение не гарантируется и может зависеть от конкретного оборудования и типа неисправности. Если вы подозреваете, что ваш системный динамик не работает, рекомендуется провести физический осмотр или использовать мультиметр.

### В: Почему на моём устройстве ARM64 не отображаются параметры системного динамика или звукового сигнала?
**A:** В системах Windows ARM64 NeoBleeper отключает настройки системных динамиков, поскольку платформы ARM64 не поддерживают прямой доступ к аппаратному обеспечению системных динамиков. Все звуковые сигналы воспроизводятся через обычное устройство вывода звука (динамики или наушники), а параметры «Проверить системный динамик» и «Использовать звуковое устройство для создания звукового сигнала» автоматически скрыты. Это сделано намеренно и не является ошибкой.

### В: Что означает предупреждение «Обнаружен нестандартный выход системного динамика»?
**A:** NeoBleeper обнаружил оборудование для подключения динамиков, не соответствующее традиционным стандартам ПК (например, не PNP0800). Это может быть «скрытый» выход для подключения динамиков, обнаруженный на современных настольных компьютерах или виртуальных машинах. В таких случаях не все функции звукового оповещения могут работать корректно, но NeoBleeper попытается использовать любой совместимый выход, который сможет обнаружить.

### В: Почему кнопка «Проверить системный динамик» отображается, даже если в Windows нет устройства для подключения динамиков ПК?
**A:** NeoBleeper включает в себя логику обнаружения скрытых или нестандартных выходов системных динамиков. Если эта кнопка появляется, это означает, что NeoBleeper обнаружил потенциальный аппаратный порт для подключения динамиков, даже если Windows не распознаёт его как устройство.

### В: Я использую API Google Gemini™ для функций искусственного интеллекта и вижу сообщение «Квота исчерпана» или «API недоступен в вашей стране». Что делать?
**О:** См. раздел 6 этого руководства. Убедитесь, что ваш ключ API, выставление счетов/квота действительны, а ваше использование соответствует региональным ограничениям Google. К сожалению, если вы находитесь в регионе с ограничениями, функции искусственного интеллекта могут быть недоступны.

### В: У меня система Intel B660 (или более новая), и мой динамик иногда не работает или зависает. Это нормально?
**О:** У некоторых новых чипсетов есть известные проблемы совместимости с повторной инициализацией системного динамика. Попробуйте перевести компьютер в спящий режим и вывести его из спящего режима или использовать обычное звуковое устройство. Проверьте наличие обновлений BIOS/прошивки, которые могут улучшить поддержку динамиков.

### В: Как лучше всего сообщить о проблемах со звуком или искусственным интеллектом в службу поддержки? **A:** Всегда предоставляйте как можно больше информации: марку/модель вашего компьютера, регион, скриншоты диалоговых окон с ошибками и файл `DebugLog.txt` из папки NeoBleeper. В случае проблем с ИИ включите полный текст диалоговых окон с ошибками и опишите состояние вашей учётной записи Gemini API.

### В: После сбоя или принудительного закрытия NeoBleeper Beep Stopper не отключил непрерывный звуковой сигнал. Есть ли другой способ исправить это?
**A:** Если Beep Stopper неэффективен, перезагрузка компьютера сбросит настройки системных динамиков и прекратит постоянный звуковой сигнал.

### В: Безопасно ли использовать утилиту Beep Stopper, если я вижу сообщение о нестандартном или отсутствующем выходе системных динамиков?
**A:** Да, но учтите, что утилита может не контролировать оборудование, а в редких случаях может привести к нестабильной работе или отсутствию эффекта. Если вы не уверены, не продолжайте и перезагрузите компьютер.

### В: На виртуальных машинах я вообще не могу заставить работать системный динамик. Это баг?
**О:** Не обязательно. Многие виртуальные машины некорректно эмулируют динамик ПК или выводят звук таким образом, что его невозможно контролировать программно. Для достижения наилучших результатов используйте стандартное устройство вывода звука.

**Возможные будущие обновления:**
Если в ходе будущих испытаний или разработок NeoBleeper сможет надёжно обнаруживать сломанные или отключённые системные динамики с помощью ультразвукового аппаратного теста, этот раздел часто задаваемых вопросов и логика обнаружения будут обновлены с учётом этих улучшений. Следите за обновлениями и новыми выпусками для получения подробной информации.

---

## 7. Получение помощи

- **Предоставьте сведения о компьютере и среде:** Сообщая о проблемах с обнаружением оборудования или звуком, укажите сведения о вашем компьютере (настольный компьютер/ноутбук, производитель/модель, операционная система) и любом связанном оборудовании.
- **Приложите снимки экрана или диалоговые окна с ошибками:** Снимки экрана с ошибками или предупреждениями очень полезны. Укажите точное время возникновения проблемы.
- **Приложите файл журнала:** Начиная с новых версий, NeoBleeper создаёт подробный файл журнала DebugLog.txt в папке программы. Приложите этот файл при обращении за помощью, так как он содержит полезную диагностическую информацию.
- **Опишите шаги для воспроизведения проблемы:** Чётко опишите, что вы делали, когда возникла проблема.
- **Откройте запрос на GitHub:** Для получения дополнительной помощи откройте запрос на GitHub и укажите все вышеперечисленные сведения для получения наилучшей поддержки.

_Это руководство обновляется по мере обнаружения новых проблем и решений. Для получения дополнительной помощи, пожалуйста, создайте задачу на GitHub с подробной информацией о вашей настройке и возникшей проблеме._
